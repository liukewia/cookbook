(self.webpackChunkcookbook_web=self.webpackChunkcookbook_web||[]).push([[531],{68408:function(W){W.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},7330:function(){},17975:function(W,b,e){"use strict";e.r(b),e.d(b,{default:function(){return Ve}});var Xe=e(18106),k=e(51752),S=e(11849),D=e(3182),Ye=e(34792),G=e(48086),K=e(2824),Je=e(43673),Qe=e(7330),X=e(22122),F=e(96156),ae=e(28481),n=e(67294),se=e(54549),oe=e(15873),le=e(57119),ie=e(68628),ce=e(73218),ue=e(38819),de=e(68855),ve=e(40847),fe=e(43061),me=e(60444),ge=e(94184),Y=e.n(ge),he=e(86032),pe=e(5467),ye=e(6610),Ce=e(5991),xe=e(10379),Ze=e(44144),Se=function(m){(0,xe.Z)(s,m);var t=(0,Ze.Z)(s);function s(){var a;return(0,ye.Z)(this,s),a=t.apply(this,arguments),a.state={error:void 0,info:{componentStack:""}},a}return(0,Ce.Z)(s,[{key:"componentDidCatch",value:function(c,C){this.setState({error:c,info:C})}},{key:"render",value:function(){var c=this.props,C=c.message,Z=c.description,N=c.children,j=this.state,T=j.error,L=j.info,P=L&&L.componentStack?L.componentStack:null,U=typeof C=="undefined"?(T||"").toString():C,A=typeof Z=="undefined"?P:Z;return T?n.createElement(q,{type:"error",message:U,description:n.createElement("pre",null,A)}):N}}]),s}(n.Component),Ne=e(96159),je=function(m,t){var s={};for(var a in m)Object.prototype.hasOwnProperty.call(m,a)&&t.indexOf(a)<0&&(s[a]=m[a]);if(m!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(m);c<a.length;c++)t.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(m,a[c])&&(s[a[c]]=m[a[c]]);return s},Le={success:ue.Z,info:ve.Z,error:fe.Z,warning:de.Z},Ee={success:oe.Z,info:ie.Z,error:ce.Z,warning:le.Z},w=function(t){var s,a=t.description,c=t.prefixCls,C=t.message,Z=t.banner,N=t.className,j=N===void 0?"":N,T=t.style,L=t.onMouseEnter,P=t.onMouseLeave,U=t.onClick,A=t.afterClose,B=t.showIcon,g=t.closable,z=t.closeText,$=t.action,E=je(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","action"]),Q=n.useState(!1),H=(0,ae.Z)(Q,2),d=H[0],i=H[1],u=n.useRef(),v=n.useContext(he.E_),p=v.getPrefixCls,h=v.direction,o=p("alert",c),V=function(f){var I;i(!0),(I=E.onClose)===null||I===void 0||I.call(E,f)},R=function(){var f=E.type;return f!==void 0?f:Z?"warning":"info"},ne=z?!0:g,l=R(),Re=function(){var f=E.icon,I=(a?Ee:Le)[l]||null;return f?(0,Ne.wm)(f,n.createElement("span",{className:"".concat(o,"-icon")},f),function(){return{className:Y()("".concat(o,"-icon"),(0,F.Z)({},f.props.className,f.props.className))}}):n.createElement(I,{className:"".concat(o,"-icon")})},De=function(){return ne?n.createElement("button",{type:"button",onClick:V,className:"".concat(o,"-close-icon"),tabIndex:0},z?n.createElement("span",{className:"".concat(o,"-close-text")},z):n.createElement(se.Z,null)):null},re=Z&&B===void 0?!0:B,Ge=Y()(o,"".concat(o,"-").concat(l),(s={},(0,F.Z)(s,"".concat(o,"-with-description"),!!a),(0,F.Z)(s,"".concat(o,"-no-icon"),!re),(0,F.Z)(s,"".concat(o,"-banner"),!!Z),(0,F.Z)(s,"".concat(o,"-rtl"),h==="rtl"),s),j),Ke=(0,pe.Z)(E);return n.createElement(me.Z,{visible:!d,motionName:"".concat(o,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(f){return{maxHeight:f.offsetHeight}},onLeaveEnd:A},function(O){var f=O.className,I=O.style;return n.createElement("div",(0,X.Z)({ref:u,"data-show":!d,className:Y()(Ge,f),style:(0,X.Z)((0,X.Z)({},T),I),onMouseEnter:L,onMouseLeave:P,onClick:U,role:"alert"},Ke),re?Re():null,n.createElement("div",{className:"".concat(o,"-content")},n.createElement("div",{className:"".concat(o,"-message")},C),n.createElement("div",{className:"".concat(o,"-description")},a)),$?n.createElement("div",{className:"".concat(o,"-action")},$):null,De())})};w.ErrorBoundary=Se;var q=w,Oe=e(94043),M=e.n(Oe),Ie={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Me=Ie,Te=e(27029),_=function(t,s){return n.createElement(Te.Z,Object.assign({},t,{ref:s,icon:Me}))};_.displayName="LockOutlined";var Pe=n.forwardRef(_),Ue=e(89366),ze=e(88245),ee=e(5429),x=e(48971),J=e(19611),Fe=e(29791),Ae=e(36571),Be=e(68408),y=e.n(Be),te=e(88793),r=e(85893),$e=function(t){var s=t.content;return(0,r.jsx)(q,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},He=function(t){var s=(0,n.useState)(!1),a=(0,K.Z)(s,2),c=a[0],C=a[1],Z=(0,n.useState)({}),N=(0,K.Z)(Z,2),j=N[0],T=N[1],L=(0,n.useState)("account"),P=(0,K.Z)(L,2),U=P[0],A=P[1],B=(0,x.tT)("@@initialState"),g=B.initialState,z=B.setInitialState;(0,n.useEffect)(function(){var d,i;if((g==null||(d=g.currentUser)===null||d===void 0?void 0:d.access)==="admin"||(g==null||(i=g.currentUser)===null||i===void 0?void 0:i.access)==="user"){var u,v;G.default.info("You have already logged in."),x.m8.push((x.m8===null||x.m8===void 0||(u=x.m8.location)===null||u===void 0||(v=u.query)===null||v===void 0?void 0:v.redirect)||"/")}},[]);var $=function(){var d=(0,D.Z)(M().mark(function i(){var u,v;return M().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,g==null||(u=g.fetchUserInfo)===null||u===void 0?void 0:u.call(g);case 2:if(v=h.sent,!v){h.next=6;break}return h.next=6,z(function(o){return(0,S.Z)((0,S.Z)({},o),{},{currentUser:v})});case 6:case"end":return h.stop()}},i)}));return function(){return d.apply(this,arguments)}}(),E=function(){var d=(0,D.Z)(M().mark(function i(u){var v,p,h,o,V,R;return M().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return C(!0),l.prev=1,l.next=4,(0,Ae.x4)((0,S.Z)({},u));case 4:if(v=l.sent,p=v.data,p.status!=="ok"){l.next=16;break}return G.default.success("Logged in successfully!"),l.next=10,$();case 10:if(x.m8){l.next=12;break}return l.abrupt("return");case 12:return h=x.m8.location.query,o=h,V=o.redirect,x.m8.push(V||"/"),l.abrupt("return");case 16:T((0,S.Z)((0,S.Z)({},p),{},{type:"account"})),l.next=23;break;case 19:l.prev=19,l.t0=l.catch(1),R="Login failed, please check!",G.default.error(R);case 23:C(!1);case 24:case"end":return l.stop()}},i,null,[[1,19]])}));return function(u){return d.apply(this,arguments)}}(),Q=j.status,H=j.type;return(0,r.jsxs)("div",{className:y().container,children:[(0,r.jsxs)("div",{className:y().content,children:[(0,r.jsx)("div",{className:y().top,children:(0,r.jsx)("div",{className:y().header,children:(0,r.jsxs)(J.rU,{to:"/",children:[(0,r.jsx)("img",{alt:"logo",className:y().logo,src:"".concat(te.r8?"/":"/static/","logo.svg")}),(0,r.jsx)("span",{className:y().title,children:te.qH})]})})}),(0,r.jsx)("div",{className:y().main,children:(0,r.jsxs)(ze.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"Log in"},render:function(i,u){return u.pop()},submitButtonProps:{loading:c,size:"large",style:{width:"100%"}}},onFinish:function(){var d=(0,D.Z)(M().mark(function i(u){return M().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:E(u);case 1:case"end":return p.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),children:[(0,r.jsx)(k.Z,{activeKey:U,onChange:A,children:(0,r.jsx)(k.Z.TabPane,{tab:"Login by account"},"account")}),Q==="error"&&H==="account"&&(0,r.jsx)($e,{content:"wrong username or password"}),U==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ee.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(Ue.Z,{className:y().prefixIcon})},placeholder:"username",rules:[{required:!0,message:"Username required!"}]}),(0,r.jsx)(ee.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(Pe,{className:y().prefixIcon})},placeholder:"password",rules:[{required:!0,message:"Password required!"}]})]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(J.rU,{to:"/",onClick:function(){return z(function(i){return(0,S.Z)((0,S.Z)({},i),{},{currentUser:{access:"guest",state:"error"}})})},children:"Visit as guest"}),(0,r.jsx)(J.rU,{to:"/user/register",style:{float:"right"},children:"Signup"})]})]})})]}),(0,r.jsx)(Fe.Z,{})]})},Ve=He}}]);
